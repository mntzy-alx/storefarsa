<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FARSA STORE</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap'); /* Just in case for fun retro look, but Poppins/Montserrat are primary */

        body {
            font-family: 'Montserrat', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -2; /* Below content and modals */
            filter: brightness(0.7);
        }

        .page {
            width: 100%;
            max-width: 900px;
            margin: 20px auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 1;
            flex-grow: 1;
            display: none; /* Hidden by default, shown by JS */
            flex-direction: column;
        }

        .page.active {
            display: flex;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .title-container {
            display: inline-block;
            background-color: rgba(0, 0, 0, 0.6);
            padding: 15px 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 2.8em;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            margin: 0;
        }

        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2em;
            color: #333;
            margin-top: 40px;
            margin-bottom: 20px;
            text-align: center;
            position: relative;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 60px;
            height: 4px;
            background-color: #FF6B6B;
            margin: 10px auto 0;
            border-radius: 2px;
        }

        .product-item, .method-item {
            background-color: #fff;
            padding: 15px 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .product-item:hover, .method-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .product-item span:first-child, .method-item span:first-child {
            font-weight: bold;
            font-size: 1.1em;
            color: #555;
        }

        .price {
            color: #FF6B6B;
            font-weight: bold;
            font-size: 1.1em;
        }

        .button {
            background-color: #FF6B6B;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .button:hover {
            background-color: #E65A5A;
            transform: translateY(-1px);
        }

        .button:active {
            transform: translateY(0);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            cursor: pointer;
            user-select: none;
            font-size: 1.1em;
            padding: 10px 0;
        }

        .checkbox-container input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }

        .checkmark {
            height: 25px;
            width: 25px;
            background-color: #eee;
            border-radius: 5px;
            margin-right: 15px;
            display: inline-block;
            position: relative;
            border: 2px solid #ccc;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .checkbox-container input:checked ~ .checkmark {
            background-color: #4CAF50;
            border-color: #4CAF50;
        }

        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }

        .checkbox-container input:checked ~ .checkmark:after {
            display: block;
            left: 9px;
            top: 5px;
            width: 7px;
            height: 12px;
            border: solid white;
            border-width: 0 3px 3px 0;
            transform: rotate(45deg);
        }

        .total-section {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            text-align: right;
            border-top: 1px solid #eee;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }

        .total-section p {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .total-section .button {
            width: 100%;
            padding: 12px 0;
            font-size: 1.1em;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 25px;
            border-radius: 10px;
            width: 80%;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            text-align: center;
            position: relative;
        }

        .modal-content img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .close-button {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-button:hover,
        .close-button:focus {
            color: #333;
            text-decoration: none;
            cursor: pointer;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
            gap: 10px;
        }

        .quantity-control button {
            background-color: #FF6B6B;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2em;
            transition: background-color 0.3s;
        }

        .quantity-control button:hover {
            background-color: #E65A5A;
        }

        .quantity-control span {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            min-width: 30px;
            text-align: center;
        }

        #itemPrice {
            font-size: 1.3em;
            font-weight: bold;
            color: #FF6B6B;
            margin-top: 15px;
        }

        /* Back Button for non-start pages */
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: #ccc;
            color: #333;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            text-decoration: none;
            transition: background-color 0.3s;
            z-index: 10; /* Ensure it's above other content */
        }

        .back-button:hover {
            background-color: #bbb;
        }

        /* Start Page Specific */
        #startPage {
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 100vh; /* Full height for start page */
            background-color: rgba(255, 255, 255, 0.2); /* More transparent for start page */
            box-shadow: none; /* No shadow for start page */
            padding: 0;
            margin: 0;
            border-radius: 0;
        }

        #startPage .title-container {
            margin-bottom: 50px;
        }

        #startPage .button {
            padding: 15px 40px;
            font-size: 1.3em;
        }

        /* Payment Confirmation Page specific */
        #paymentConfirmPage {
            text-align: center;
        }

        #paymentConfirmPage h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 2.5em;
            color: #FF6B6B;
            margin-bottom: 30px;
        }

        #paymentConfirmPage .button-group {
            display: flex;
            flex-direction: column; /* Stack buttons vertically */
            gap: 20px;
            margin-top: 30px;
            width: 100%;
            max-width: 400px; /* Limit width of button group */
            margin-left: auto;
            margin-right: auto;
        }

        #paymentConfirmPage .button-group .button {
            min-width: 180px;
            padding: 15px 25px;
            font-size: 1.2em;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            .section-title {
                font-size: 1.8em;
            }
            .product-item, .method-item {
                flex-direction: column;
                align-items: flex-start;
                padding: 10px 15px;
            }
            .product-item span:first-child, .method-item span:first-child {
                margin-bottom: 5px;
            }
            .button {
                width: 100%;
                margin-top: 10px;
            }
            .modal-content {
                width: 90%;
                padding: 20px;
            }
            #paymentConfirmPage .button-group {
                flex-direction: column;
                gap: 15px;
            }
            #paymentConfirmPage .button-group .button {
                width: 100%;
                min-width: unset;
            }
            .back-button {
                top: 10px;
                left: 10px;
                padding: 6px 12px;
                font-size: 0.8em;
            }
            #startPage .button {
                padding: 12px 30px;
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <video autoplay muted loop class="video-background">
        <source src="https://files.catbox.moe/b6cxkm.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <div id="startPage" class="page active">
        <div class="title-container">
            <h1>SELAMAT DATANG DI FARSA STORE</h1>
        </div>
        <button class="button" onclick="showPage('productPage')">MULAI BELANJA</button>
    </div>

    <div id="productPage" class="page">
        <a href="#" class="back-button" onclick="showPage('startPage'); return false;">&larr; Kembali</a>
        <header>
            <div class="title-container">
                <h1>PRODUK FARSA STORE</h1>
            </div>
        </header>

        <h2 class="section-title">PILIH PRODUK</h2>

        <div class="product-item">
            <span>AM PREM 1 TAHUN PRIV</span>
            <span class="price">Rp 5.100</span>
            <button class="button" onclick="openQuantityModal('AM PREM 1 TAHUN PRIV', 5100)">Pilih</button>
        </div>

        <div class="product-item">
            <span>NOKOS WA INDO</span>
            <span class="price">Rp 4.500</span>
            <button class="button" onclick="openQuantityModal('NOKOS WA INDO', 4500)">Pilih</button>
        </div>
        <div class="total-section" style="margin-top: auto; padding-top: 20px;">
            <p>Total Item Terpilih: <span id="selectedItemsCount">0</span></p>
            <p>Total Pembayaran: <span id="totalPayment">Rp 0</span></p>
            <button class="button" id="goToPaymentButton" onclick="showPage('paymentMethodPage')">LANJUT KE PEMBAYARAN</button>
        </div>
    </div>

    <div id="paymentMethodPage" class="page">
        <a href="#" class="back-button" onclick="showPage('productPage'); return false;">&larr; Kembali</a>
        <header>
            <div class="title-container">
                <h1>METODE PEMBAYARAN</h1>
            </div>
        </header>

        <h2 class="section-title">PILIH METODE</h2>

        <div class="method-item">
            <label class="checkbox-container">
                <input type="checkbox" data-method="DANA" data-detail="08889376566" onchange="updateSelectedMethods()">
                <span class="checkmark"></span>
                DANA
            </label>
            <button class="button" onclick="copyToClipboard('08889376566', 'Nomor DANA berhasil disalin!')">Salin Nomor</button>
        </div>

        <div class="method-item">
            <label class="checkbox-container">
                <input type="checkbox" data-method="QRIS" onchange="updateSelectedMethods()">
                <span class="checkmark"></span>
                QRIS
            </label>
            <button class="button" onclick="showQrisModal()">Tampilkan QRIS</button>
        </div>

        <div class="method-item">
            <label class="checkbox-container">
                <input type="checkbox" data-method="SOCIABUZZ" onchange="updateSelectedMethods()">
                <span class="checkmark"></span>
                SOCIABUZZ
            </label>
            <button class="button" onclick="window.open('https://sociabuzz.com/farsastore/tribe', '_blank')">Kunjungi Sociabuzz</button>
        </div>

        <div class="total-section" style="margin-top: auto; padding-top: 20px;">
            <p>Total Item Terpilih: <span id="selectedItemsCountPayment">0</span></p>
            <p>Total Pembayaran: <span id="totalPaymentPayment">Rp 0</span></p>
            <button class="button" id="payButton" onclick="showPage('paymentConfirmPage')">KIRIM BUKTI BAYAR</button>
        </div>
    </div>

    <div id="paymentConfirmPage" class="page">
        <a href="#" class="back-button" onclick="showPage('paymentMethodPage'); return false;">&larr; Kembali</a>
        <h2>KIRIM BUKTI PEMBAYARAN</h2>
        <p style="font-size: 1.2em; color: #555; max-width: 600px; text-align: center; line-height: 1.6; margin-bottom: 30px;">
            Terima kasih telah berbelanja di FARSA STORE!
            Mohon segera kirimkan bukti pembayaran Anda melalui salah satu opsi di bawah ini agar pesanan Anda dapat segera diproses.
        </p>
        <div class="button-group">
            <a href="#" id="whatsappButton" target="_blank" class="button">
                Kirim via WhatsApp
            </a>
            <a href="https://t.me/farsazack" target="_blank" class="button">
                Kirim via Telegram
            </a>
        </div>
    </div>

    <div id="quantityModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeQuantityModal()">&times;</span>
            <h3 id="modalItemName"></h3>
            <div class="quantity-control">
                <button onclick="changeQuantity(-1)">-</button>
                <span id="itemQuantity">1</span>
                <button onclick="changeQuantity(1)">+</button>
            </div>
            <p id="itemPrice"></p>
            <button class="button" style="margin-top: 20px;" onclick="addItemToCart()">Tambahkan ke Keranjang</button>
        </div>
    </div>

    <div id="qrisModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeQrisModal()">&times;</span>
            <h2>Scan QRIS untuk Pembayaran</h2>
            <img src="https://img1.pixhost.to/images/7518/626277227_rizzhosting.jpg" alt="QRIS Code">
            <p style="font-size: 0.9em; color: #666;">Pastikan jumlah pembayaran sesuai dengan total belanja Anda.</p>
        </div>
    </div>

    <script>
        let selectedProducts = {}; // { productName: { price: x, quantity: y } }
        let currentItem = {}; // Item being processed in quantity modal
        let currentPage = 'startPage'; // Track current active page

        // Function to show/hide pages
        function showPage(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            currentPage = pageId;

            // Dim/undim background based on modal state
            if (pageId === 'productPage' || pageId === 'paymentMethodPage' || pageId === 'paymentConfirmPage') {
                document.body.style.filter = 'none'; // Ensure background is not dimmed when no modal is active
            }

            // Update totals when navigating to product or payment page
            if (pageId === 'productPage' || pageId === 'paymentMethodPage') {
                updateTotals();
            }
            // Update WhatsApp button link when navigating to payment confirmation
            if (pageId === 'paymentConfirmPage') {
                generateWhatsAppLink();
            }
        }

        function openQuantityModal(name, price) {
            currentItem = { name: name, price: price };
            document.getElementById('modalItemName').innerText = name;
            document.getElementById('itemQuantity').innerText = 1; // Reset quantity to 1
            document.getElementById('itemPrice').innerText = `Rp ${price.toLocaleString('id-ID')}`;
            document.getElementById('quantityModal').style.display = 'flex';
            document.body.style.filter = 'brightness(0.9)'; // Dim entire body
        }

        function closeQuantityModal() {
            document.getElementById('quantityModal').style.display = 'none';
            document.body.style.filter = 'none'; // Restore brightness
        }

        function changeQuantity(change) {
            let quantitySpan = document.getElementById('itemQuantity');
            let currentQuantity = parseInt(quantitySpan.innerText);
            let newQuantity = currentQuantity + change;

            if (newQuantity >= 1) {
                quantitySpan.innerText = newQuantity;
                document.getElementById('itemPrice').innerText = `Rp ${(currentItem.price * newQuantity).toLocaleString('id-ID')}`;
            }
        }

        function addItemToCart() {
            const name = currentItem.name;
            const price = currentItem.price;
            const quantity = parseInt(document.getElementById('itemQuantity').innerText);

            selectedProducts[name] = { price: price, quantity: quantity };
            closeQuantityModal();
            updateTotals();
        }

        function updateSelectedMethods() {
            // This function is mainly for visual feedback of checkboxes.
            // The actual payment method selection logic would be on the backend.
            // For now, it just triggers updateTotals to keep consistency.
            updateTotals();
        }

        function updateTotals() {
            let totalItems = 0;
            let totalPayment = 0;

            for (const item in selectedProducts) {
                totalItems += selectedProducts[item].quantity;
                totalPayment += selectedProducts[item].price * selectedProducts[item].quantity;
            }

            // Update totals on product page
            const selectedItemsCountElem = document.getElementById('selectedItemsCount');
            const totalPaymentElem = document.getElementById('totalPayment');
            if (selectedItemsCountElem) selectedItemsCountElem.innerText = totalItems;
            if (totalPaymentElem) totalPaymentElem.innerText = `Rp ${totalPayment.toLocaleString('id-ID')}`;

            // Update totals on payment method page
            const selectedItemsCountPaymentElem = document.getElementById('selectedItemsCountPayment');
            const totalPaymentPaymentElem = document.getElementById('totalPaymentPayment');
            if (selectedItemsCountPaymentElem) selectedItemsCountPaymentElem.innerText = totalItems;
            if (totalPaymentPaymentElem) totalPaymentPaymentElem.innerText = `Rp ${totalPayment.toLocaleString('id-ID')}`;
        }

        function showQrisModal() {
            document.getElementById('qrisModal').style.display = 'flex';
            document.body.style.filter = 'brightness(0.9)'; // Dim entire body
        }

        function closeQrisModal() {
            document.getElementById('qrisModal').style.display = 'none';
            document.body.style.filter = 'none'; // Restore brightness
        }

        function copyToClipboard(text, message) {
            navigator.clipboard.writeText(text).then(() => {
                alert(message);
            }).catch(err => {
                console.error('Could not copy text: ', err);
            });
        }

        function generateWhatsAppLink() {
            let waMessage = "Halo FARSA STORE, saya sudah melakukan pembayaran.\nMohon cek bukti pembayaran saya.\n\n*Detail Pesanan:*\n";
            let totalBayar = 0;
            if (Object.keys(selectedProducts).length === 0) {
                waMessage += "Tidak ada produk yang dipilih.\n";
            } else {
                for (const item in selectedProducts) {
                    const itemData = selectedProducts[item];
                    waMessage += `- ${item} (${itemData.quantity} item) - Rp ${(itemData.price * itemData.quantity).toLocaleString('id-ID')}\n`;
                    totalBayar += itemData.price * itemData.quantity;
                }
            }
            waMessage += `\n*Total Pembayaran: Rp ${totalBayar.toLocaleString('id-ID')}*`;

            const whatsappButton = document.getElementById('whatsappButton');
            whatsappButton.href = `https://wa.me/628889376566?text=${encodeURIComponent(waMessage)}`;
        }

        // Initial page load
        document.addEventListener('DOMContentLoaded', () => {
            showPage('startPage');
            updateTotals(); // Initialize totals
        });
    </script>
</body>
</html>
